{% extends "layout.html" %}

{% block body %}
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">

<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.2.1/js/bootstrap.bundle.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script src="{{ url_for('static', filename = 'js/jquery.csv.min.js') }}"></script>

<!--
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
        crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css">
-->

<body>
    <h2 style="text-align: center;">
        Potential Issues
    </h2>
    <div id="points"></div>
</body>

<style>
.points-row {
    color: #FFFFFF;
    width: 100%;
    height: 10vh;
    margin-bottom: 30px;
    background: #364156;
    text-align: center;
}

.points-row:hover {
    color: #FFFFFF;
    width: 100%;
    height: 10vh;
    margin-bottom: 30px;
    background: #748dbb;
    text-align: center;
    cursor: pointer;
}

.show-more {
    display:none;
}
</style>

<script>

$.ajax({
    type: "GET",
    url: "http://energycomps.its.carleton.edu/api/points",
    cache: false,
    success: function (data) {
        $.each(JSON.parse(data), function(i, element) {
            var row = "<div class=\"points-row\">";
            row += "Point ID: " + element.point_id;
            row += "<div class=\"show-more\">" 
            row += "Point Name: " + element.point_name + "<br>";
            row += "</div>";
            row += "</div>";
            $("#points").append(row);
        });
    }
});

// $.ajax({
//     type: "GET",
//     url: "http://energycomps.its.carleton.edu/api/points?search",
//     cache: false,
//     success: function (data) {
//         $.each(JSON.parse(data), function(i, element) {
//             var row = "<div class=\"points-row\">";
//             row += "Point Name: " + element.point_name
//             row += "<div class=\"show-more\">" 
//             row += "Building Name: " + element.building_name + "<br>";
//             row += "Room Name: " + element.room_name + "<br>";
//             row += "</div>";
//             row += "</div>";
//             $("#points").append(row);
//         });
//     }
// });

$(document).on('click', '.points-row', function (){
    $(this).children().toggle();
});

</script>

{% endblock %}
